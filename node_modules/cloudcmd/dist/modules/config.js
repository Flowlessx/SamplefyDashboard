!function(e){function t(t){for(var r,i,u=t[0],a=t[1],f=t[2],s=0,d=[];s<u.length;s++)i=u[s],o[i]&&d.push(o[i][0]),o[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(l&&l(t);d.length;)d.shift()();return c.push.apply(c,f||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,u=1;u<n.length;u++){var a=n[u];0!==o[a]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={2:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/";var u=window.webpackJsonp=window.webpackJsonp||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var l=a;c.push([95,0]),n()}({149:function(e,t){},95:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,c=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t,n,r,o,c,i){try{var u=e[c](i),a=u.value}catch(e){return void n(e)}u.done?t(a):Promise.resolve(a).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var c=e.apply(t,n);function u(e){i(c,r,o,u,a,"next",e)}function a(e){i(c,r,o,u,a,"throw",e)}u(void 0)})}}n(149);var a=n(11),f=n(0),l=n(1),s=n(7),d=n(36),p=n(6).promisify,y=n(4),m=n(2),g=n(96),v=n(3),b=n(15),h=n(14),w=n(5).getTitle,O=DOM,C=O.Dialog,j=O.setTitle;CloudCmd.Config=e.exports;var S=l(C.alert,"Config"),x=p(DOM.loadSocket),k=function(){v.show.load("top")},P=l(function(e,t){return b.addKey(t,e),t}),A=l(function(e,t){return b.add("change",t,e),t}),E={},T=!0;e.exports.init=u(function*(){var e,t,n,r,o,c,i,u,a,f;CloudCmd.config("configDialog")&&(k(),yield CloudCmd.View(),yield x(),i=location,u=i.host,a=i.origin,f=i.protocol,e=a||"".concat(f,"//").concat(u),t=CloudCmd,n=t.prefixSocket,r=t.prefix,o=io.connect(e+n+"/config",{reconnectionAttempts:1/0,reconnectionDelay:6e4,path:r+"/socket.io"}),c=function(e){J(e),o.send(e)},function(e){e.emit("auth",V("username"),V("password")),e.on("reject",s(S,"Wrong credentials!"))}(o),o.on("connect",function(){E.save=c}),o.on("message",J),o.on("log",CloudCmd.log),o.on("disconnect",function(){E.save=K}),o.on("err",S),T=!1)});var D,M,N=CloudCmd,V=N.config,_=N.Key;function B(e,t){M||(M=t),h.get("config",function(e,t){if(e)return S("Could not load config!");var n=g.convert(t),i=n.editor,u=n.packer,f=n.columns,l=n.configAuth,s=c(n,["editor","packer","columns","configAuth"]);s[i+"-selected"]="selected",s[u+"-selected"]="selected",s[f+"-selected"]="selected",s.configAuth=l?"":"hidden";var p=a(M,s);D=m("form",{className:"config",innerHTML:p});var y,v=document.querySelectorAll("input, select",D),b=o(v,1)[0];b&&(R(b.checked),y=b.focus.bind(b));var h=d(q,function(e){return e.target});r(v).map(P(z)).map(A(h));CloudCmd.View.show(D,{autoSize:!0,afterShow:y})})}function I(){CloudCmd.View.hide()}function q(e){var t={},n=g.getName(e),r=g.getValue(n,D);"name"===n?function(e){j(w({name:e}))}(r):"auth"===n&&R(r),t[n]=r,E.save(t)}function J(e){Object.keys(e).forEach(function(t){var n=e[t];CloudCmd._config(t,n),g.setValue(t,n,D)})}function K(e){DOM.RESTful.Config.write(e,function(t){t||J(e)})}function R(e){var t=g.getElementByName("username",D),n=g.getElementByName("password",D);t.disabled=n.disabled=!e}function z(e){var t=e.keyCode,n=e.target;switch(t){case _.ESC:return I();case _.ENTER:return q(n)}}E.save=K,e.exports.show=function(){if(!CloudCmd.config("configDialog"))return;var e=CloudCmd.prefix,t=[f.with(h.get,"config-tmpl"),f.with(y.css,e+"/dist/config.css")];if(T)return;k(),f.parallel(t,B)},e.exports.hide=I},96:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=n(1)(function(e,t,n){return o(t[n])===e})("boolean");function i(e,t){var n='[data-name="js-'.concat(e,'"]');return t.querySelector(n)}e.exports.getElementByName=i,e.exports.getName=function(e){return e.getAttribute("data-name").replace(/^js-/,"")},e.exports.convert=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},e);return Object.keys(t).filter(c(t)).forEach(function(e){var n=t[e];t[e]=n?" checked":""}),t},e.exports.getValue=function(e,t){var n=i(e,t);switch(n.type){case"checkbox":return n.checked;case"number":return Number(n.value);default:return n.value}},e.exports.setValue=function(e,t,n){var r=i(e,n);switch(r.type){case"checkbox":r.checked=t;break;default:r.value=t}}}});
//# sourceMappingURL=config.js.map