!function(e){function t(t){for(var o,i,l=t[0],a=t[1],c=t[2],f=0,s=[];f<l.length;f++)i=l[f],r[i]&&s.push(r[i][0]),r[i]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);for(d&&d(t);s.length;)s.shift()();return u.push.apply(u,c||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],o=!0,l=1;l<n.length;l++){var a=n[l];0!==r[a]&&(o=!1)}o&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={12:0},u=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/";var l=window.webpackJsonp=window.webpackJsonp||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=a;u.push([88,0]),n()}({88:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r,u,i,l=n(0),a=n(7),c=n(22),d=n(2),f=n(5).FS,s=n(13).getIdBySrc,p=n(19),m=CloudCmd,C=m.config,h=m.Key,g=DOM,y=g.Buffer,v=g.Events,O=g.Dialog,w=g.Images,b=DOM.CurrentInfo,x=a(O.alert.noFiles)("Cloud Commander"),D=a(function(e){b.getData(function(t,n){if(!t){var o=b.name,r=CloudCmd.execFromModule;r(e,"uploadFile",o,n)}}),CloudCmd.log("Uploading to "+name+"...")});function M(){u.hide(),i.hide()}function F(e){var t,n;return e?(t="context",n=h.unsetBind):t="contextFile",{icon:!0,beforeClose:h.setBind,beforeShow:l.with(j,n),beforeClick:k,name:t}}function P(e){var t={Paste:y.paste,New:{File:DOM.promptNewFile,Directory:DOM.promptNewDir},Upload:function(){CloudCmd.Upload.show()},"Upload From Cloud":E,"(Un)Select All":DOM.toggleAllSelectedFiles};return e&&(t["Log Out"]=CloudCmd.logOut),t}function S(e,t){if(".."!==b.name)return e();t()}function j(e,t){var n=t.name,o="contextFile"===function(e){return e?".."===DOM.getCurrentName(e)?"context":"contextFile":"context"}(DOM.getCurrentByPosition({x:t.x,y:t.y}));return"contextFile"===t.name&&(o=!o),o||(r=n),l(e),o||(o=function(e,t){var n=b.panel;if(!n)return!1;var o=document.elementFromPoint(e,t),r=n.querySelectorAll('[data-name="js-path"] *');return~[].indexOf.call(r,o)}(t.x,t.y)),o}function k(e){return r!==e}function E(){w.show.load("top"),CloudCmd.execFromModule("Cloud","saveFile",function(e,t){var n=DOM.getCurrentDirPath()+e;p.write(n,t,function(t){t||CloudCmd.refresh({currentName:e})})})}function B(){!function(e){var t=CloudCmd.prefixURL,n=Date.now(),o=DOM.getActiveFiles();if(!o.length)return x();o.forEach(function(o){var r=DOM.isSelected(o),u=DOM.isCurrentIsDir(o),i=DOM.getCurrentPath(o);CloudCmd.log("downloading file "+i+"...");var l,a=encodeURI(i).replace(/#/g,"%23"),c=s(i);l=u?t+"/pack"+a+DOM.getPackerExt(e):t+f+a+"?download";var p=d("iframe",{id:c+"-"+n,async:!1,className:"hidden",src:l}),m=document,C=m.body,h=C.removeChild.bind(C,p);setTimeout(h,3e4),r&&DOM.toggleSelectedFile(o)})}(C("packer"))}function U(){var e=b.element.getBoundingClientRect();return{x:Math.round(e.left+e.width/3),y:Math.round(e.top)}}function A(e){var t=h.F9,n=h.ESC,o=e.keyCode;if(h.isBind()){if(o===n)return M();if(o===t){var r=U();u.show(r.x,r.y),e.preventDefault()}}}e.exports.ENABLED=!1,CloudCmd.Menu=t,e.exports.init=function(){var e=function(){var e=CloudCmd.config("auth"),t=a(function(e){CloudCmd[e].show()}),n=P(e),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({},{View:t("View"),Edit:t("EditFile"),Rename:function(){setTimeout(DOM.renameCurrent,100)},Delete:function(){CloudCmd.Operation.show("delete")},Pack:function(){CloudCmd.Operation.show("pack")},Extract:function(){CloudCmd.Operation.show("extract")},Download:B,"Upload To Cloud":D("Cloud"),Cut:function(){S(y.cut,x)},Copy:function(){S(y.copy,x)}},n);return{isAuth:e,menuDataFile:r}}(),t=e.isAuth,n=e.menuDataFile,r=DOM.getFM(),l=P(t),d=F(!0),f=F();u=c(r,d,l),i=c(r,f,n),v.addKey(A)},e.exports.hide=M,e.exports.show=function(e){var t=function(e){return e?{x:e.x,y:e.y}:U()}(e),n=t.x,o=t.y;u.show(n,o),i.show(n,o),w.hide()}}});
//# sourceMappingURL=menu.js.map