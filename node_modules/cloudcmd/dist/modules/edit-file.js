!function(t){function e(e){for(var o,u,l=e[0],c=e[1],a=e[2],f=0,s=[];f<l.length;f++)u=l[f],r[u]&&s.push(r[u][0]),r[u]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(d&&d(e);s.length;)s.shift()();return i.push.apply(i,a||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(o=!1)}o&&(i.splice(e--,1),t=u(u.s=n[0]))}return t}var o={},r={5:0},i=[];function u(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=t,u.c=o,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)u.d(n,o,function(e){return t[e]}.bind(null,o));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/dist/";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var a=0;a<l.length;a++)e(l[a]);var d=c;i.push([81,0]),n()}({81:function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e,n,o,r,i,u){try{var l=t[i](u),c=l.value}catch(t){return void n(t)}l.done?e(c):Promise.resolve(c).then(o,r)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var u=t.apply(e,n);function l(t){r(u,o,i,l,c,"next",t)}function c(t){r(u,o,i,l,c,"throw",t)}l(void 0)})}}CloudCmd.EditFile=e;var u,l,c=n(82),a=n(10),d=n(0),f=n(22),s=DOM.CurrentInfo,p=DOM,C=p.Dialog,v=p.Images,m=CloudCmd.config,h="Edit",g=a(),b={beforeClose:function(){d.ifExist(u,"hide"),O()}};function y(){CloudCmd.Edit.hide()}function E(t){var e={x:t.clientX,y:t.clientY};if(t.preventDefault(),!u){var n,o={beforeShow:function(t){t.x-=18,t.y-=27},afterClick:function(){CloudCmd.Edit.getEditor().focus()}},r=CloudCmd.Edit.getElement();(u=f(r,o,(n=CloudCmd.Edit.getEditor(),{"Save           Ctrl+S":function(){n.save()},"Go To Line     Ctrl+G":function(){n.goToLine()},"Cut            Ctrl+X":function(){n.cutToClipboard()},"Copy           Ctrl+C":function(){n.copyToClipboard()},"Paste          Ctrl+V":function(){n.pasteFromClipboard()},"Delete         Del":function(){n.remove("right")},"Select All     Ctrl+A":function(){n.selectAll()},"Close          Esc":function(){y()}}))).show(e.x,e.y)}}function O(){var t=CloudCmd.Edit.getEditor();if(t.isChanged()){C.confirm(h,l,{cancel:!1}).then(function(){t.save()})}}t.exports.init=i(function*(){g(!0),yield CloudCmd.Edit();var t,e=CloudCmd.Edit.getEditor();(t=e).emit("auth",m("username"),m("password")),t.on("reject",function(){C.alert(h,"Wrong credentials!")}),function(t){var e=CloudCmd.Edit.getElement();DOM.Events.addOnce("contextmenu",e,E),t.on("save",function(t){DOM.setCurrentSize(c.size(t))})}(e),g(!1)}),t.exports.show=function(t){if(!g()){var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}({},b,t);return CloudCmd.config("showFileName")&&(e.title=s.name),v.show.load(),CloudCmd.Edit.getEditor().setOption("keyMap","default"),s.getData(function(t,n){var o=s.path,r=function(){var t=s.name;return s.isDir?"".concat(t,".json"):t}();if(t)return v.hide();!function(t){l="Do you want to save changes to "+t+"?"}(r),CloudCmd.Edit.getEditor().setValueFirst(o,n).setModeForPath(r).enableKey(),CloudCmd.Edit.show(e)}),CloudCmd.Edit}},t.exports.hide=y,t.exports.isChanged=O}});
//# sourceMappingURL=edit-file.js.map